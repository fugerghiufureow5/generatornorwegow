"use strict";function SlotMachine(i){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],t=arguments[2],e=arguments[3],h=this,p=24,n={reelHeight:1200,reelWidth:200,reelOffset:20,animSpeed:1e3,rngFunc:function(){return Math.random()}};function r(){var r=[];o.forEach(function(t){var e=function(t){for(var e=0,n=t.length,i=0;i<n;i++){e+=t[i].weight}for(var o=l()*e,r=0;r<n;r++){var a=t[r],s=a.weight;if(o<s)return a;o-=s}}(t.symbols),n=e.position;r.push(e);var i=t.element;i.classList.remove("stop"),i.classList.toggle("spin"),i.childNodes.forEach(function(t,e){t.style.backgroundPositionY=f(e,n)+"px"});var o=window.setTimeout(function(){i.classList.replace("spin","stop"),h.isAnimating=!1,window.clearTimeout(o)},h.options.animSpeed*function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10,n=Math.ceil(t),i=Math.floor(e);return Math.floor(l()*(Math.floor(i)-n))+n}(1,4))}),t(r)}function l(){return h.options.rngFunc()}function f(t,e){return-Math.abs(m()*t+(e-h.options.reelOffset))}function m(){return h.options.reelHeight/p}!function(){if(h.options=Object.assign(n,e),!o)throw new Error("Failed to initialize (missing reels)");(function(){var t=document.createElement("div");t.classList.add("display");for(var e=0;e<o.length;e++){var n=document.createElement("div");n.classList.add("reel"),t.appendChild(n)}t.addEventListener("click",function(){return r()}),i.appendChild(t)})(),function(){var n=document.createElement("div");n.classList.add("slots"),o.forEach(function(t){var e=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=m(),i=h.options.reelWidth,o=360/p,r=Math.trunc(Math.tan(90/Math.PI-o)*(.5*n)*4),a=r+n/2,s=document.createElement("ul");s.style.height=n+"px",s.style.marginTop=a+"px",s.style.width=i+"px",s.classList.add("reel");for(var l=0;l<p;l++){var c=document.createElement("li"),d=f(l,e),u=p*o-l*o;c.style.background="url("+t.imageSrc+") 0px "+d+"px",c.style.height=n+"px",c.style.width=i+"px",c.style.transform="rotateX("+u+"deg) translateZ("+r+"px)",s.appendChild(c)}return s}(t,t.symbols[0].position);n.appendChild(e),t.element=e}),i.appendChild(n)}()}(),this.play=function(){!function(t){h.isAnimating||(h.isAnimating=!0,t.call(h))}(r)}}window.slotMachine=function(t,e,n,i){return new SlotMachine(t,e,n,i)},"undefined"!=typeof module&&module.exports&&(module.exports=SlotMachine);